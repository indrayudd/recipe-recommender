(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(0),l=a.n(r);a(5);var s=a(3),c=a.n(s);function i(){const[e,t]=Object(r.useState)(""),[a,s]=Object(r.useState)([]),[c,i]=Object(r.useState)(null),[o,m]=Object(r.useState)(null),[p,d]=Object(r.useState)(""),[u,g]=Object(r.useState)(!1),[h,y]=Object(r.useState)(!1),[f,x]=Object(r.useState)(-1),[b,E]=Object(r.useState)(!1),[v,N]=Object(r.useState)({}),[k,S]=Object(r.useState)(!1),[w,j]=Object(r.useState)(null),[F,O]=Object(r.useState)([]),[R,C]=Object(r.useState)([]),[D,z]=Object(r.useState)(!1),_=function(e,t){const[a,n]=Object(r.useState)(e);return Object(r.useEffect)(()=>{const a=setTimeout(()=>{n(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}(e.trim(),300),T=Object(r.useRef)({}),I=Object(r.useRef)(!1),A=u||h||c||o,B=Object(r.useCallback)(async t=>{try{const n=await fetch("https://recipe-recommender-backend.onrender.com/autocomplete?title=".concat(t)),r=await n.json();t===e.trim()&&(T.current[t]=r||[],s(r||[]),x(-1))}catch(a){console.error(a)}},[e]);Object(r.useEffect)(()=>{if(!I.current)return!_||_.length<3?(s([]),void x(-1)):void(T.current[_]?(s(T.current[_]),x(-1)):B(_));I.current=!1},[_,B]);const L=e=>{I.current=!0,d(""),t(""),s([]),x(-1),i(null),m(null),g(!0),y(!0),Promise.all([fetch("https://recipe-recommender-backend.onrender.com/metadata?title=".concat(e)).then(e=>e.json()),fetch("https://recipe-recommender-backend.onrender.com/cover_recs?title=".concat(e)).then(e=>e.json())]).then(e=>{let[t,a]=e;t.error?d(t.error):(i(t),j(t),m(a),C(e=>{return[{type:"search",recipe_name:t.recipe_name,metadata:t,coverRecs:a},...e].slice(0,10)}))}).catch(e=>{console.error(e),d("Failed to fetch search data")}).finally(()=>{g(!1),y(!1)})};return l.a.createElement("div",{className:"app-container"},l.a.createElement("div",{className:"panel left-panel"},l.a.createElement("div",{className:"header-container"},l.a.createElement("div",{className:"history-toggle-flap",onClick:()=>z(!0)},l.a.createElement("span",{className:"toggle-arrow",role:"img","aria-label":"open history"},"\u2192")),l.a.createElement("h2",{className:"panel-title"},"AI Recipes")),l.a.createElement("div",{className:"left-content ".concat(D?"fade-out":"fade-in")},l.a.createElement("form",{className:"query-form",style:{position:"relative"},onSubmit:e=>e.preventDefault()},l.a.createElement("input",{type:"text",placeholder:"Enter a recipe name",value:e,onChange:e=>{t(e.target.value),x(-1)},onKeyDown:e=>{if(a&&0!==a.length)switch(e.key){case"ArrowDown":e.preventDefault(),x(e=>Math.min(e+1,a.length-1));break;case"ArrowUp":e.preventDefault(),x(e=>Math.max(e-1,0));break;case"Enter":e.preventDefault(),f<0?x(0):L(a[f])}},className:"query-input"}),l.a.createElement("button",{className:"query-button",onClick:e=>e.preventDefault()},l.a.createElement("img",{src:"/magnifying-glass.png",alt:"Search",className:"search-icon"})),a.length>0&&l.a.createElement("ul",{className:"autocomplete-dropdown"},a.map((e,t)=>l.a.createElement("li",{key:t,className:t===f?"highlighted":"",onMouseEnter:()=>x(t),onClick:()=>L(e)},e)))),c||u?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"closest-match",style:{marginTop:"20px"}},u&&!c?l.a.createElement("div",{className:"closest-match skeleton skeleton-recipe",style:{height:"60px"}}):c?l.a.createElement("p",{style:{fontWeight:"bold",textTransform:"capitalize",fontSize:"20px",fontFamily:"'Funnel Display', sans-serif"}},c.recipe_name):null),l.a.createElement("div",{className:"macro-card",style:{marginTop:"20px",background:"white",borderRadius:"5px",padding:"10px",color:"#333",height:"120px",boxSizing:"border-box"}},u&&!c?l.a.createElement("div",{className:"skeleton",style:{height:"80px",borderRadius:"5px"}}):c&&c.macros&&!c.macros.error?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{margin:"0 0 10px 0",fontFamily:"'Funnel Display', sans-serif",fontWeight:"bold"}},c.macros.calories," kcal"),l.a.createElement("div",{className:"macro-grid",style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",rowGap:"4px",columnGap:"12px",fontFamily:"'Funnel Display', sans-serif",fontSize:"14px"}},l.a.createElement("p",null,"Fat: ",c.macros.fat),l.a.createElement("p",null,"Protein: ",c.macros.protein),l.a.createElement("p",null,"Sugar: ",c.macros.sugar),l.a.createElement("p",null,"Sat Fat: ",c.macros.sat_fat),l.a.createElement("p",null,"Sodium: ",c.macros.sodium),l.a.createElement("p",null,"Carbs: ",c.macros.carbs))):l.a.createElement("p",{style:{margin:0}},"No macro info")),l.a.createElement("div",{className:"ingredients-card",style:{marginTop:"20px",background:"white",borderRadius:"5px",padding:"10px",color:"#333",height:"180px",boxSizing:"border-box",display:"flex",flexDirection:"column"}},u&&!c?l.a.createElement("div",{className:"skeleton",style:{height:"80px",borderRadius:"5px"}}):c&&c.ingredients?l.a.createElement(l.a.Fragment,null,l.a.createElement("h4",{style:{margin:"0 0 5px 0",fontFamily:"'Funnel Display', sans-serif"}},"Ingredients"),l.a.createElement("div",{style:{flex:1,overflowY:"auto",fontFamily:"'Funnel Display', sans-serif"}},l.a.createElement("ul",{style:{margin:0,paddingLeft:"20px"}},c.ingredients.map((e,t)=>l.a.createElement("li",{key:t,style:{marginBottom:"3px"}},e))))):l.a.createElement("p",null,"No ingredients found")),l.a.createElement("button",{className:"ai-remix-button",onClick:()=>{if(c&&c.ingredients){const e={};c.ingredients.forEach(t=>{e[t]=!0}),N(e)}E(!0)}},l.a.createElement("img",{src:"/sparkles-svgrepo-com.svg",alt:"Remix Icon",className:"remix-icon"}),l.a.createElement("span",{className:"ai-remix-text"},"AI",l.a.createElement("br",null),"Remix"))):null,p&&l.a.createElement("p",{className:"error-message"},p)),l.a.createElement("div",{className:"history-panel ".concat(D?"slide-in":"slide-out")},l.a.createElement("div",{className:"history-header"},l.a.createElement("span",{className:"close-history",onClick:()=>z(!1),role:"img","aria-label":"close history"},"\u2190"),l.a.createElement("h3",null,"History")),R.map((e,t)=>l.a.createElement("div",{key:t,className:"history-item",onClick:()=>(e=>{i(e.metadata),m(e.coverRecs),z(!1)})(e)},"remix"===e.type&&l.a.createElement("span",{className:"remix-emoji",role:"img","aria-label":"sparkles"},"\u2728"),e.recipe_name)))),l.a.createElement("div",{className:"panel right-panel",style:{paddingTop:"20px",overflowX:"hidden",boxSizing:"border-box"}},A?l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"cover-card",style:{width:"100%",marginBottom:"20px",background:"#f8f8f8",padding:"20px",borderRadius:"10px",boxSizing:"border-box"}},h&&!o?l.a.createElement("div",{className:"cover-image skeleton",style:{width:"100%",height:"200px",marginBottom:"10px"}}):o?l.a.createElement("img",{src:o&&o.cover_image?o.cover_image:"/fallback.png",alt:"cover",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"10px"}}):l.a.createElement("img",{src:"/fallback.png",alt:"cover",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"10px"}}),c&&l.a.createElement("div",{style:{marginTop:"10px"}},l.a.createElement("h2",{style:{margin:0,textTransform:"capitalize",fontFamily:"'Funnel Display', sans-serif"}},c.recipe_name),l.a.createElement("p",{style:{margin:0,fontSize:"14px"}},c.minutes," mins"))),l.a.createElement("div",{style:{display:"flex",gap:"20px",width:"100%",boxSizing:"border-box"}},l.a.createElement("div",{style:{flex:"2",background:"#fff",borderRadius:"10px",padding:"10px",boxSizing:"border-box",display:"flex",flexDirection:"column"}},l.a.createElement("h3",{style:{fontFamily:"'Funnel Display', sans-serif"}},"Steps"),l.a.createElement("div",{style:{flex:1,overflowY:"auto",fontFamily:"'Funnel Display', sans-serif"}},u&&!c?l.a.createElement("div",{className:"skeleton",style:{height:"100px",borderRadius:"10px"}}):c&&c.steps?l.a.createElement("ol",null,c.steps.map((e,t)=>l.a.createElement("li",{key:t,style:{marginBottom:"5px"}},(e=>e&&0!==e.length?e[0].toUpperCase()+e.slice(1):"")(e)))):l.a.createElement("p",null,"No steps loaded"))),l.a.createElement("div",{style:{flex:"1",display:"flex",flexDirection:"column",gap:"10px",boxSizing:"border-box"}},l.a.createElement("h4",{style:{margin:"0 0 10px 0",fontFamily:"'Funnel Display', sans-serif"}},"Recommendations"),h&&!o?Array(4).fill(0).map((e,t)=>l.a.createElement("div",{key:t,className:"recommendation-item skeleton",style:{height:"50px"}})):o&&o.recommendations?o.recommendations.slice(0,4).map((e,t)=>l.a.createElement("div",{key:t,className:"recommendation-item",style:{fontSize:"14px",height:"50px"},onClick:()=>L(e.recipe_name)},e.recipe_name)):l.a.createElement("p",{style:{textAlign:"center"}},"No recommendations")))):l.a.createElement("div",{className:"landing-watermark",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100%"}},l.a.createElement("p",{style:{fontFamily:"'Funnel Display', sans-serif",fontSize:"20px"}},"Search to See Recipes!"))),b&&l.a.createElement("div",{className:"remix-modal-overlay"},l.a.createElement("div",{className:"remix-modal-content"},l.a.createElement("button",{className:"modal-close-button",onClick:()=>E(!1)},"\xd7"),l.a.createElement("h2",null,"Deselect Missing Ingredients"),l.a.createElement("div",{className:"chip-container"},c&&c.ingredients&&c.ingredients.map(e=>{const t=e.toLowerCase(),a=t.includes("salt")||t.includes("sugar")||t.includes("oil");return l.a.createElement("span",{key:e,className:"chip ".concat(v[e]?"selected":"unselected"," ").concat(a?"undeselectable":""),onClick:()=>{a||(e=>{e.toLowerCase().includes("salt")||e.toLowerCase().includes("sugar")||e.toLowerCase().includes("oil")||N(t=>Object(n.a)(Object(n.a)({},t),{},{[e]:!t[e]}))})(e)}},e)})),l.a.createElement("button",{className:"remix-button",onClick:()=>{if(!c||!c.ingredients)return;S(!0);const e=c.ingredients.filter(e=>v[e]),t={original:c,newIngredients:e};fetch("https://recipe-recommender-backend.onrender.com/remix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(e=>e.text()).then(e=>{let t;console.log("Raw response text:",e);try{t=JSON.parse(e)}catch(a){throw d("Error parsing remix response: "+a.message),a}return t}).then(e=>{e.error?d(e.error):(i(e),O(t=>[...t,e]),C(t=>[{type:"remix",recipe_name:e.recipe_name,metadata:e,coverRecs:o},...t].slice(0,10)))}).catch(e=>{console.error(e),d("Failed to remix recipe")}).finally(()=>{E(!1),S(!1)})},disabled:k},k?l.a.createElement("span",{className:"spinner"}):"Remix"))))}t.default=i;c.a.createRoot(document.getElementById("root")).render(l.a.createElement(i,null))},5:function(e,t,a){}},[[13,1,2]]]);
//# sourceMappingURL=main.desktop.chunk.js.map